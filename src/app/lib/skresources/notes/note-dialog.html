
<style>
    ._ap-resource {
        font-family: arial;
        width: 60vw;
    }
      
    .ap-confirm-icon { 
        min-width: 35px;
        max-width: 35px;
        text-align: left;                    
    }
   
    .ap-confirm-icon .mat-icon { 
        font-size: 25pt;
    }
    .mat-form-field {
        width: 100%;
    }
    .nosmall { 
        display: none;
    }
    @media only screen
        and (min-device-width : 768px)
        and (max-device-width : 1024px),
        only screen	and (min-width : 800px) { 
        .ap-confirm-icon {
            min-width: 25%;
            max-width: 25%;
        }
        .ap-confirm-icon .mat-icon { 
            font-size: 40pt;
        }
        .nosmall { 
            display: flex;
        }                   
    }    
           
</style>

<div class="_ap-resource" *ngIf="!data.editable">
    <h1 mat-dialog-title>
        <mat-icon class="ap-confirm-icon" color="primary">local_offer</mat-icon>
        Note Details
    </h1>
    <mat-dialog-content>        
        <mat-card style="background-color: whitesmoke;">
            <mat-card-content>
                <div style="display:flex;flex-direction:column;">
                    <div style="padding-bottom: 5px;display:flex;">
                        <div style="font-weight:bold;vertical-align:top;">Title:</div>
                        <div style="padding-left: 10px;">
                            {{data.note.title}}
                        </div>  
                    </div>                      
                    <div style="flex: 1 1 auto;padding: 5px 0 5px 0;">
                        <div style="font-weight:bold;vertical-align:top;">Description:</div>
                        <div style="overflow-y:auto;height:150px;">
                            {{data.note.description}}
                        </div>  
                    </div>    
                    <div style="display:flex;padding-bottom: 5px;">
                        <div style="font-weight:bold;vertical-align:top;">URL:</div>
                        <div style="flex: 1 1 auto;padding-left: 10px;">
                            <a href="#" (click)="openNoteUrl()" style="color:blue;"
                                matTooltip="Open Note link in browser window">
                                <mat-icon color="primary">open_in_new</mat-icon>
                                Open Link
                            </a>
                        </div>  
                    </div>                             
                    <div class="nosmall" style="font-size: 10pt;padding:5px 0 5px 0;">
                        <div style="width:45px;font-weight:bold;">Lat:</div>
                        <div >{{data.note.position.latitude}}</div>
                        &nbsp;
                        <div style="width:45px;font-weight:bold;">Lng:</div>
                        <div>{{data.note.position.longitude}}</div> 
                    </div>    
                </div>
            </mat-card-content>
            <mat-card-actions>
                <div style="text-align:right;">
                    <button mat-icon-button (click)="dialogRef.close({result:true, data: 'edit'})"
                        matTooltip="Edit Note">
                        <mat-icon color="primary">edit</mat-icon>
                    </button>  
                    &nbsp;
                    <button mat-icon-button (click)="dialogRef.close({result:true, data: 'delete'})"
                        matTooltip="Delete Note">
                        <mat-icon color="warn">delete</mat-icon>
                    </button>        
                </div>
            </mat-card-actions>
        </mat-card>
    </mat-dialog-content>
    <mat-dialog-actions>
        <div style="text-align:center;width:100%;">                   
            <button mat-raised-button (click)="dialogRef.close({result:false})">
                CLOSE
            </button>          
        </div>					
    </mat-dialog-actions>
</div>	

<div class="_ap-resource" *ngIf="data.editable">
    <div>
        <h1 mat-dialog-title>{{(!data.title) ? (data.addMode) ? 'New Note:' : 'Edit Note:' : data.title}}</h1>
    </div>
    <mat-dialog-content>
        <div style="display:flex;">
            <div class="ap-confirm-icon">
                <mat-icon color="primary">local_offer</mat-icon>
            </div>
            <div style="flex: 1 1 auto;">                          
                <div>                                     
                    <mat-form-field>
                        <input matInput #inptitle="ngModel"
                            type="text" required
                            placeholder="Note Title"
                            [disabled]="false"
                            [(ngModel)]="data.note.title">
                        <mat-error *ngIf="inptitle.invalid && (inptitle.dirty || inptitle.touched)">
                            Please enter a title for the note
                        </mat-error>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field>
                        <textarea matInput rows="7" #inpdesc="ngModel"
                            placeholder="Note Details"
                            [(ngModel)]="data.note.description">
                        </textarea>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field hintLabel="Optional: Enter a url to additional content here">
                        <input type="text" matInput 
                            placeholder="URL"
                            [(ngModel)]="data.note.url"/>
                    </mat-form-field>
                </div>
                
                <div *ngIf="data.position" style="font-size: 10pt;">
                    <div style="display:flex;">
                        <div style="width:45px;font-weight:bold;">Lat:</div>
                        <div style="flex: 1 1 auto;">{{data.note.position.latitude}}</div>
                    </div>
                    <div style="display:flex;">
                        <div style="width:45px;font-weight:bold;">Lng:</div>
                        <div style="flex: 1 1 auto;">{{data.note.position.longitude}}</div>
                    </div>    
                </div>                              
            </div>                            
        </div>
    </mat-dialog-content>
    <mat-dialog-actions>
        <div style="text-align:center;width:100%;">
            <button mat-raised-button color="primary" 
                [disabled]="inptitle.invalid"
                (click)="dialogRef.close({result:true, data: data.note, action: 'save'})">
                SAVE
            </button>
            <button mat-raised-button (click)="dialogRef.close({result:false, data: null})">
                CANCEL
            </button>
        </div>					
    </mat-dialog-actions>
</div>